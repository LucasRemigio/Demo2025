<ng-container *transloco="let t">
    <div class="flex flex-col max-h-screen -m-6">
        <!-- Header -->
        <div
            class="flex items-center justify-between h-16 pl-6 pr-3 orange-bg flex-0 sm:pr-5 sm:pl-8"
        >
            <div class="text-lg font-medium">
                {{ t("Filtering.origin-email") }}
            </div>
            <button mat-icon-button (click)="close()" [tabIndex]="-1">
                <mat-icon
                    class="text-current"
                    [svgIcon]="'heroicons_outline:x'"
                ></mat-icon>
            </button>
        </div>

        <div class="flex flex-col w-full min-w-0 sm:inset-0">
            <mat-drawer-container class="flex-auto sm:h-full">
                <!-- Drawer -->
                <mat-drawer
                    class="overflow-x-hidden sm:w-96 dark:bg-gray-900"
                    [autoFocus]="false"
                    [mode]="drawerMode"
                    [opened]="drawerOpened"
                    #drawer
                >
                    <!-- Header -->
                    <div
                        class="flex items-center justify-between m-8 mr-6 sm:my-10"
                    >
                        <!-- Title -->
                        <div
                            class="text-4xl font-extrabold leading-none tracking-tight"
                        >
                            {{ t("Order.view_options") }}
                        </div>
                        <!-- Close button -->
                        <div class="lg:hidden">
                            <button mat-icon-button (click)="drawer.close()">
                                <mat-icon
                                    class="text-gray-900"
                                    [svgIcon]="'heroicons_outline:x'"
                                ></mat-icon>
                            </button>
                        </div>
                    </div>
                    <!-- Panel links -->
                    <div class="flex flex-col border-t border-b divide-y">
                        <ng-container
                            *ngFor="let panel of panels; trackBy: trackByFn"
                        >
                            <div
                                class="flex px-8 py-5 cursor-pointer"
                                [ngClass]="{
                                    'hover:bg-gray-100 dark:hover:bg-hover':
                                        !selectedPanel ||
                                        selectedPanel !== panel.id,
                                    'bg-primary-50 dark:bg-hover':
                                        selectedPanel &&
                                        selectedPanel === panel.id
                                }"
                                (click)="goToPanel(panel.id)"
                            >
                                <mat-icon
                                    [ngClass]="{
                                        'text-secondary':
                                            !selectedPanel ||
                                            selectedPanel !== panel.id,
                                        'orange-text dark:text-primary-500':
                                            selectedPanel &&
                                            selectedPanel === panel.id
                                    }"
                                    [svgIcon]="panel.icon"
                                ></mat-icon>
                                <div class="ml-3">
                                    <div
                                        class="font-medium leading-6"
                                        [ngClass]="{
                                            'orange-text dark:text-primary-500':
                                                selectedPanel &&
                                                selectedPanel === panel.id
                                        }"
                                    >
                                        {{ panel.title }}
                                    </div>
                                    <div class="mt-0.5 text-secondary">
                                        {{ panel.description }}
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </mat-drawer>

                <!-- Drawer content -->
                <mat-drawer-content class="flex flex-col">
                    <!-- Main -->
                    <div class="flex-auto drawer-content">
                        <!-- Panel header -->
                        <div class="flex flex-col">
                            <!-- Top Row: Buttons  -->
                            <div class="flex items-center mt-4 space-x-4">
                                <!-- Drawer toggle -->
                                <button
                                    class="-ml-2 lg:hidden"
                                    mat-icon-button
                                    (click)="drawer.toggle()"
                                >
                                    <mat-icon
                                        class="text-grey-900"
                                        [svgIcon]="'heroicons_outline:menu'"
                                        style="color: gray"
                                    ></mat-icon>
                                </button>

                                <!-- Mark as resolved button -->
                                <div
                                    *ngIf="
                                        data.filteredEmail.status !==
                                            'Resolvido Manualmente';
                                        else alreadyResolved
                                    "
                                >
                                    <button
                                        mat-button
                                        class="flex items-center p-1 pr-2 text-white orange-bg hover:bg-orange-700 rounded-2xl"
                                        (click)="changeEmailStatus()"
                                        [disabled]="isLoading"
                                    >
                                        <mat-icon
                                            [svgIcon]="
                                                'heroicons_solid:check-circle'
                                            "
                                            class="ml-2"
                                        ></mat-icon>
                                        <p class="mx-2 text-xl bold">
                                            {{ t("Email.mark-resolved") }}
                                        </p>
                                    </button>
                                </div>

                                <!-- Already resolved state -->
                                <ng-template #alreadyResolved>
                                    <!-- Mark as Unresolved button -->
                                    <div class="flex items-center">
                                        <button
                                            mat-button
                                            class="flex items-center p-1 text-white shadow-md orange-bg hover:bg-orange-700 rounded-2xl"
                                            (click)="changeEmailStatus()"
                                            [disabled]="isLoading"
                                        >
                                            <mat-icon
                                                class="ml-2 text-white"
                                                [svgIcon]="
                                                    'heroicons_solid:refresh'
                                                "
                                            ></mat-icon>
                                            <p class="mx-2 text-xl bold">
                                                {{ t("Email.revert-resolved") }}
                                            </p>
                                        </button>
                                    </div>
                                </ng-template>

                                <!-- Print Email button -->
                                <div class="flex flex-end">
                                    <button
                                        mat-button
                                        [matMenuTriggerFor]="printMenu"
                                        class="flex items-center p-1 pr-2 text-white bg-gray-600 hover:bg-gray-500 rounded-2xl"
                                        [disabled]="isLoading"
                                    >
                                        <mat-icon
                                            [svgIcon]="
                                                'heroicons_solid:printer'
                                            "
                                            class="ml-2"
                                        ></mat-icon>
                                        <p class="mx-2 text-xl bold">
                                            {{ t("Email.print") }}
                                        </p>
                                    </button>
                                </div>

                                <!-- Dropdown menu for printing options -->
                                <mat-menu
                                    #printMenu="matMenu"
                                    class="px-4 py-2 bg-white rounded-lg shadow-lg"
                                >
                                    <button
                                        mat-menu-item
                                        (click)="printEmail(true, false)"
                                        class="flex justify-start p-2 transition-all duration-200 rounded-md hover:bg-orange-100"
                                    >
                                        <mat-icon
                                            class="text-orange-600"
                                            [svgIcon]="
                                                'heroicons_solid:document'
                                            "
                                        ></mat-icon>
                                        <span class="text-lg text-gray-700">{{
                                            t("Email.print-body")
                                        }}</span>
                                    </button>
                                    <button
                                        mat-menu-item
                                        [disabled]="
                                            !data.emailAttachments ||
                                            data.emailAttachments.length === 0
                                        "
                                        (click)="printEmail(false, true)"
                                        class="flex justify-start p-2 transition-all duration-200 rounded-md hover:bg-orange-100"
                                    >
                                        <mat-icon
                                            class="text-orange-600"
                                            [svgIcon]="
                                                'heroicons_solid:paper-clip'
                                            "
                                        ></mat-icon>
                                        <span class="text-lg text-gray-700">{{
                                            t("Email.print-attachments")
                                        }}</span>
                                    </button>
                                    <button
                                        mat-menu-item
                                        [disabled]="
                                            !data.emailAttachments ||
                                            data.emailAttachments.length === 0
                                        "
                                        (click)="printEmail(true, true)"
                                        class="flex justify-start p-2 transition-all duration-200 rounded-md hover:bg-orange-100"
                                    >
                                        <mat-icon
                                            class="text-orange-600"
                                            [svgIcon]="
                                                'heroicons_solid:printer'
                                            "
                                        ></mat-icon>
                                        <span class="text-lg text-gray-700">{{
                                            t("Email.print-both")
                                        }}</span>
                                    </button>
                                </mat-menu>

                                <!-- Mark email as spam-->
                                <div
                                    class="flex items-center"
                                    *ngIf="
                                        data.filteredEmail.category !==
                                        emailCategories.SPAM.title
                                    "
                                >
                                    <button
                                        mat-button
                                        class="flex items-center p-1 text-white bg-gray-600 shadow-md hover:bg-gray-500 rounded-2xl"
                                        (click)="markEmailAsSpam()"
                                        [disabled]="isLoading"
                                    >
                                        <mat-icon
                                            class="ml-2 text-white"
                                            [svgIcon]="'heroicons_solid:trash'"
                                        ></mat-icon>
                                        <div *ngIf="!isMarkingEmailAsSpam">
                                            <p class="mx-2 text-xl bold">
                                                {{ t("Email.mark-as-spam") }}
                                            </p>
                                        </div>
                                        <div *ngIf="isMarkingEmailAsSpam">
                                            <mat-spinner
                                                class="mx-4"
                                                diameter="24"
                                                strokeWidth="4"
                                            ></mat-spinner>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <!-- Bottom Row: Warnings -->
                            <div class="flex flex-col mt-4 space-y-4">
                                <!-- Flash Warning -->
                                <div
                                    class="flex items-center mt-10 ml-30 mr-30"
                                    *ngIf="flashMessage"
                                >
                                    <ng-container
                                        *ngIf="flashMessage === 'success'"
                                    >
                                        <mat-icon
                                            class="text-green-500"
                                            [svgIcon]="
                                                'heroicons_outline:check'
                                            "
                                        ></mat-icon>
                                        <span
                                            class="ml-2"
                                            [innerText]="flashMessageText"
                                        ></span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="flashMessage === 'error'"
                                    >
                                        <mat-icon
                                            class="text-red-500"
                                            [svgIcon]="'heroicons_outline:x'"
                                        ></mat-icon>
                                        <span
                                            class="ml-2"
                                            [innerText]="flashMessageText"
                                        ></span>
                                    </ng-container>
                                </div>

                                <!-- Info about the resolved state -->
                                <fuse-alert
                                    *ngIf="
                                        data.filteredEmail.status ===
                                        'Resolvido Manualmente'
                                    "
                                    class="flex justify-center flex-1 mt-2"
                                    [type]="'warning'"
                                    [appearance]="'soft'"
                                    [dismissible]="true"
                                    [dismissed]="false"
                                >
                                    <span fuseAlertTitle>
                                        {{
                                            t("Email.already-resolved") +
                                                " " +
                                                data.filteredEmail.resolved_by +
                                                " - " +
                                                (data.filteredEmail.resolved_at
                                                    | date
                                                        : "dd/MM/yyyy HH:mm:ss")
                                        }}
                                    </span>
                                </fuse-alert>

                                <!-- Concurrency Warning -->
                                <div
                                    *ngIf="replyConcurrencyInfo"
                                    class="flex justify-center flex-1 w-full"
                                >
                                    <fuse-alert
                                        *ngIf="!replyConcurrencyInfo.canReply"
                                        [type]="'warning'"
                                        [appearance]="'fill'"
                                        [dismissible]="true"
                                        [dismissed]="false"
                                    >
                                        <span fuseAlertTitle>
                                            {{
                                                replyConcurrencyInfo.replyInfo
                                                    .user +
                                                    " (" +
                                                    replyConcurrencyInfo
                                                        .replyInfo.date +
                                                    ")"
                                            }}</span
                                        >
                                        {{ t("email-already-open") }}
                                    </fuse-alert>
                                </div>

                                <!-- More than 1 domain in the email Warning -->
                                <div
                                    *ngIf="getDistinctEmailsLength > 1"
                                    class="flex justify-center flex-1 w-full"
                                >
                                    <fuse-alert
                                        [type]="'warning'"
                                        [appearance]="'border'"
                                        [dismissible]="true"
                                        [dismissed]="false"
                                    >
                                        <span fuseAlertTitle>
                                            {{
                                                t(
                                                    "email-multiple-domains-detected"
                                                )
                                            }}</span
                                        >
                                        {{
                                            t(
                                                "email-multiple-domains-detected-text"
                                            ) + " "
                                        }}
                                        <b>{{ getFormattedDistinctEmails }}</b>
                                    </fuse-alert>
                                </div>
                            </div>
                        </div>

                        <ng-template #emailForm>
                            <ng-container>
                                <div
                                    class="flex flex-col flex-auto h-full px-6 pb-12"
                                    id="emailInfoDiv"
                                >
                                    <!-- Header -->
                                    <div
                                        class="flex flex-col items-start flex-auto overflow-y-auto"
                                        style="
                                            font-size: 50%;
                                            white-space: pre-line;
                                            overflow-wrap: break-word;
                                            width: 100%;
                                            height: 70vh;
                                        "
                                    >
                                        <div
                                            class="flex items-center mt-2 text-lg font-semibold"
                                        >
                                            <mat-label class="mr-2">
                                                <b>{{ t("sender") }}: </b>
                                            </mat-label>

                                            <!-- Show text or input conditionally based on isEditingFrom -->
                                            <div
                                                *ngIf="
                                                    !isEditingFrom;
                                                    else editFrom
                                                "
                                            >
                                                {{ emailFrom }}
                                            </div>

                                            <!-- Edit mode: Input field -->
                                            <ng-template #editFrom>
                                                <input
                                                    class="p-2 ml-2 bg-white"
                                                    [(ngModel)]="emailFrom"
                                                    (keydown.enter)="
                                                        changeEmailDestinatary(
                                                            emailFrom
                                                        )
                                                    "
                                                    type="email"
                                                    placeholder="{{
                                                        t('change-sender')
                                                    }}"
                                                    style="width: 35vh"
                                                />
                                                <button
                                                    class="w-8 h-8 mt-2 ml-2 min-h-8 custom-badge"
                                                    (click)="
                                                        changeEmailDestinatary(
                                                            emailFrom
                                                        )
                                                    "
                                                    mat-icon-button
                                                    matTooltip="{{
                                                        t('Order.save-changes')
                                                    }}"
                                                    style="
                                                        background-color: #4caf50;
                                                    "
                                                >
                                                    <mat-icon
                                                        class="icon-size-5"
                                                        [svgIcon]="
                                                            'heroicons_solid:check'
                                                        "
                                                    ></mat-icon>
                                                </button>
                                            </ng-template>

                                            <!-- Edit button -->
                                            <div
                                                class="ml-2"
                                                *ngIf="
                                                    this.selectedPanel ===
                                                    'responsePanel'
                                                "
                                            >
                                                <button
                                                    class="w-8 h-8 mt-2 ml-2 min-h-8 custom-badge"
                                                    [matTooltip]="
                                                        t('change-sender', {})
                                                    "
                                                    mat-icon-button
                                                    style="
                                                        background-color: #5a5a5a;
                                                    "
                                                    (click)="toggleEditFrom()"
                                                >
                                                    <mat-icon
                                                        class="icon-size-5"
                                                        [svgIcon]="
                                                            'heroicons_solid:pencil'
                                                        "
                                                    ></mat-icon>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Email Cc -->
                                        <div
                                            class="mt-4 text-lg font-semibold"
                                            *ngIf="
                                                data.filteredEmail.email.cc !==
                                                ''
                                            "
                                        >
                                            <mat-label><b>Cc:</b></mat-label>
                                            {{ getFormattedEmails("cc") }}
                                        </div>

                                        <!-- Email Bcc -->
                                        <div
                                            class="mt-4 text-lg font-semibold"
                                            *ngIf="
                                                data.filteredEmail.email.bcc !==
                                                ''
                                            "
                                        >
                                            <mat-label><b>Bcc:</b></mat-label>
                                            {{ getFormattedEmails("bcc") }}
                                        </div>

                                        <!-- Email Date -->
                                        <div class="mt-4 text-lg font-semibold">
                                            <mat-label
                                                ><b
                                                    >{{ t("email-date") }}:</b
                                                ></mat-label
                                            >
                                            {{
                                                data.filteredEmail.email.date
                                                    | date
                                                        : "dd/MM/yyyy HH:mm:ss"
                                            }}
                                        </div>

                                        <!-- Email Subject -->
                                        <div class="mt-4 text-lg font-semibold">
                                            <mat-label
                                                ><b
                                                    >{{
                                                        t(
                                                            "Notifications.subject"
                                                        )
                                                    }}:</b
                                                ></mat-label
                                            >
                                            {{
                                                data.filteredEmail.email.subject
                                            }}
                                        </div>

                                        <div
                                            class="w-full text-lg font-semibold"
                                            *ngIf="
                                                selectedPanel !==
                                                'responsePanel'
                                            "
                                            id="emailBodyField"
                                        >
                                            <div
                                                class="mt-4 text-lg font-semibold"
                                            >
                                                <mat-label
                                                    ><b
                                                        >{{
                                                            t("email-body")
                                                        }}:</b
                                                    ></mat-label
                                                >

                                                <!-- Display Email HTML content-->
                                                <div
                                                    [readonly]="true"
                                                    class="p-2 mr-10 bg-white email-body-container"
                                                    [innerHTML]="
                                                        sanitizedEmailBody
                                                    "
                                                ></div>
                                            </div>
                                        </div>

                                        <div
                                            class="w-full pr-4 mt-2 text-lg font-semibold"
                                            *ngIf="
                                                selectedPanel ===
                                                'responsePanel'
                                            "
                                        >
                                            <div *ngIf="replyConcurrencyInfo">
                                                <app-email-reply-form
                                                    [emailId]="
                                                        data.filteredEmail.email
                                                            .id
                                                    "
                                                    [isReplyToOriginal]="true"
                                                    [filteredToken]="
                                                        data.filteredEmail.token
                                                    "
                                                    [previousResponseWritten]="
                                                        previousResponseWritten
                                                    "
                                                    [cc]="
                                                        data.filteredEmail.email
                                                            .cc
                                                    "
                                                    [bcc]="
                                                        data.filteredEmail.email
                                                            .bcc
                                                    "
                                                    [to]="
                                                        data.filteredEmail.email
                                                            .from
                                                    "
                                                    (responseWritten)="
                                                        handleResponseWritten(
                                                            $event
                                                        )
                                                    "
                                                    (responseSent)="
                                                        handleResponseSent(
                                                            $event
                                                        )
                                                    "
                                                ></app-email-reply-form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-template>

                        <ng-template #attachmentForm>
                            <!-- Download all possible files -->
                            <ng-container *ngIf="hasAttachments">
                                <div class="px-4">
                                    <ng-container
                                        *ngFor="
                                            let attach of data.emailAttachments
                                        "
                                    >
                                        <p
                                            class="flex items-center pb-2 space-x-2"
                                        >
                                            <!-- Download Button -->
                                            <a
                                                href="#"
                                                (click)="
                                                    downloadFile(attach, $event)
                                                "
                                                class="inline-flex items-center px-2 py-1 mr-2 font-semibold text-white transition duration-300 ease-in-out transform bg-blue-500 rounded-full shadow-md hover:bg-blue-600 hover:-translate-y-1 hover:shadow-lg"
                                            >
                                                <mat-icon
                                                    [svgIcon]="
                                                        'heroicons_solid:cloud-download'
                                                    "
                                                ></mat-icon>
                                            </a>
                                            {{ attach.name }}
                                        </p>
                                    </ng-container>
                                </div>

                                <div
                                    *ngIf="isAnyAttachmentPdf"
                                    class="mx-4 my-4"
                                >
                                    <mat-label class="text-xl">
                                        <b>{{ t("Order.pdf_preview") }}</b>
                                    </mat-label>

                                    <ng-container
                                        *ngFor="let attach of pdfAttachments"
                                    >
                                        <!-- Show natively the pdfs in its raw-->

                                        <!-- Wrapping the pdf-viewer in a div with proper width, height, and overflow settings -->
                                        <div
                                            style="
                                                width: 100%;
                                                height: 70vh;
                                                overflow: hidden;
                                                max-width: 100%;
                                            "
                                            class="mb-10 mr-5"
                                            id="emailAttachDiv"
                                        >
                                            <div
                                                class="text-secondary"
                                                class="mx-4 mb-2"
                                            >
                                                <mat-label>
                                                    <p>{{ attach.name }}</p>
                                                </mat-label>
                                            </div>
                                            <pdf-viewer
                                                src="data:application/pdf;base64,{{
                                                    attach.file
                                                }}"
                                                [show-all]="true"
                                                [original-size]="false"
                                                [render-text]="true"
                                                [zoom]="0.9"
                                                [zoom-scale]="'page-width'"
                                                style="
                                                    width: 100%;
                                                    height: 100%;
                                                    max-width: 100%;
                                                "
                                            ></pdf-viewer>
                                        </div>
                                    </ng-container>
                                </div>

                                <div
                                    *ngIf="!isAnyAttachmentPdf"
                                    class="mx-4 my-4"
                                    style="width: 90%; height: 60vh"
                                >
                                    <b class="text-lg">{{ t("no-pdf") }}</b>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="!hasAttachments">
                                <div
                                    class="mt-3 text-lg font-semibold text-center"
                                    style="width: 100%; height: 60vh"
                                >
                                    <mat-label
                                        ><b>{{ t("attachments") }}: </b
                                        >{{
                                            t("Order.no-attachments")
                                        }}</mat-label
                                    >
                                </div>
                            </ng-container>
                        </ng-template>

                        <!-- Form de mudança de categoria-->
                        <ng-template #changeCategoryForm>
                            <ng-container
                                *ngIf="categoryForm && categories.length > 0"
                            >
                                <div
                                    class="flex flex-col flex-auto h-full px-6 pb-12"
                                >
                                    <!-- Header -->
                                    <div
                                        class="flex flex-col items-center flex-auto overflow-y-auto"
                                        style="
                                            font-size: 50%;
                                            white-space: pre-line;
                                            overflow-wrap: break-word;
                                            width: 100%;
                                            height: 70vh;
                                        "
                                    >
                                        <form
                                            class="flex flex-col flex-auto"
                                            [formGroup]="categoryForm"
                                        >
                                            <div class="mb-6 text-center">
                                                <div
                                                    class="text-2xl font-bold tracking-tight"
                                                >
                                                    {{
                                                        t(
                                                            "Filtering.categorize-email"
                                                        )
                                                    }}
                                                </div>
                                                <hr />
                                                <div
                                                    class="m-2 text-lg font-semibold"
                                                >
                                                    <mat-label
                                                        ><b>
                                                            {{
                                                                t(
                                                                    "Email.current-category"
                                                                )
                                                            }}:
                                                        </b></mat-label
                                                    >
                                                    {{
                                                        data.filteredEmail
                                                            .category
                                                    }}
                                                </div>

                                                <div class="flex flex-row">
                                                    <!-- Dropdown for categories -->
                                                    <mat-form-field
                                                        appearance="fill"
                                                        class="w-90"
                                                    >
                                                        <mat-label
                                                            >{{
                                                                t(
                                                                    "Order.category"
                                                                )
                                                            }}:</mat-label
                                                        >

                                                        <mat-select
                                                            [formControlName]="
                                                                'category'
                                                            "
                                                        >
                                                            <mat-option
                                                                *ngFor="
                                                                    let category of categories
                                                                "
                                                                [value]="
                                                                    category.id
                                                                "
                                                            >
                                                                {{
                                                                    category.title
                                                                }}
                                                            </mat-option>
                                                        </mat-select>
                                                        <mat-error
                                                            *ngIf="
                                                                categoryForm
                                                                    .get(
                                                                        'category'
                                                                    )
                                                                    .hasError(
                                                                        'required'
                                                                    )
                                                            "
                                                        >
                                                            {{
                                                                t(
                                                                    "email-category-mandatory"
                                                                )
                                                            }}
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <!-- Button to trigger categorize function -->
                                                <button
                                                    mat-raised-button
                                                    class="text-white gray-bg"
                                                    (click)="
                                                        verifyCategorizeForm()
                                                    "
                                                >
                                                    <mat-icon
                                                        style="
                                                            margin-right: 10px;
                                                        "
                                                        [svgIcon]="
                                                            'heroicons_solid:tag'
                                                        "
                                                    ></mat-icon>
                                                    {{
                                                        t(
                                                            "Filtering.categorize"
                                                        )
                                                    }}
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-template>

                        <!-- Load settings panel -->
                        <div class="mt-4">
                            <ng-container [ngSwitch]="selectedPanel">
                                <!-- TriggerPanel -->
                                <ng-container *ngSwitchCase="'emailPanel'">
                                    <ng-container
                                        *ngTemplateOutlet="emailForm"
                                    ></ng-container>
                                </ng-container>
                                <!-- TemplatePanel -->
                                <ng-container *ngSwitchCase="'attachmentPanel'">
                                    <ng-container
                                        *ngTemplateOutlet="attachmentForm"
                                    ></ng-container>
                                </ng-container>
                                <!-- responsePanel -->
                                <ng-container *ngSwitchCase="'responsePanel'">
                                    <ng-container
                                        *ngTemplateOutlet="emailForm"
                                    ></ng-container>
                                </ng-container>
                                <!-- ChangeCategoryPanel -->
                                <ng-container
                                    *ngSwitchCase="'changeCategoryPanel'"
                                >
                                    <ng-container
                                        *ngTemplateOutlet="changeCategoryForm"
                                    ></ng-container>
                                </ng-container>
                                <!-- TriggerPanel -->
                                <ng-container *ngSwitchCase="'signaturePanel'">
                                    <ng-container
                                        *ngTemplateOutlet="signatureForm"
                                    ></ng-container>
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>
                </mat-drawer-content>
            </mat-drawer-container>
        </div>
    </div>

    <!-- Edit template form / Panel -->
</ng-container>
